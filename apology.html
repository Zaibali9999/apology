<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>I'm Sorry — A Little Page for You 💌</title>
  <style>
    :root{
      --bg:#FFF7FB;
      --card:#ffffff;
      --accent:#ff6b9a;
      --muted:#6b6b6b;
      --shadow: 0 10px 30px rgba(107,107,107,0.08);
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;display:grid;place-items:center;background:linear-gradient(180deg,var(--bg),#fff);font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}

    .stage{width:92vw;max-width:760px;padding:28px;border-radius:20px;background:var(--card);box-shadow:var(--shadow);text-align:center;position:relative;overflow:hidden}

    h1{margin:6px 0 0;font-size:28px;color:var(--accent);letter-spacing:0.3px}
    p.lead{margin:12px 0 20px;color:var(--muted);line-height:1.5}

    .message{font-size:18px;min-height:110px;display:flex;align-items:center;justify-content:center;padding:10px 18px;border-radius:12px;background:linear-gradient(90deg,rgba(255,107,154,0.06),rgba(255,195,210,0.04));box-shadow:inset 0 -2px 0 rgba(0,0,0,0.02)}

    .typing{font-family: 'Georgia', serif; font-size:18px;color:#333;white-space:pre-wrap}

    .controls{margin-top:18px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
    a.button, button{background:var(--accent);border:0;color:white;padding:10px 16px;border-radius:999px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(255,107,154,0.18);transition:transform .12s ease;text-decoration:none;display:inline-block}
    a.button:active, button:active{transform:translateY(2px) scale(.995)}

    .heart{position:absolute;left:50%;top:18px;transform:translateX(-50%);font-size:26px;opacity:.95}

    .heart-float{position:absolute;bottom:-40px;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;pointer-events:none}
    .heart-float::before{content:'\2764';font-size:22px;color:var(--accent);transform:translateY(0);display:inline-block}

    @keyframes floatUp{
      0%{transform:translateY(0) scale(0.8);opacity:0}
      10%{opacity:1}
      100%{transform:translateY(-120vh) scale(1.15);opacity:0}
    }

    .spark{position:absolute;right:14px;top:14px;width:12px;height:12px;border-radius:3px;background:linear-gradient(45deg,#ffd2e0,#fff);opacity:.85;transform:rotate(25deg)}

    footer{margin-top:14px;color:#9a9a9a;font-size:13px}

    .cute-heart{display:inline-block;margin-left:8px;transform-origin:center;animation:beat 1.1s infinite}
    @keyframes beat{0%{transform:scale(1)}40%{transform:scale(1.18)}60%{transform:scale(.96)}100%{transform:scale(1)} }

    @media (max-width:420px){ h1{font-size:22px} .message{font-size:16px}}
  </style>
</head>
<body>
  <div class="stage" role="region" aria-label="Apology card">
    <div class="spark" aria-hidden="true"></div>
    <div class="heart" aria-hidden="true">💖</div>
    <h1>I'm so sorry... <span class="cute-heart">💓</span></h1>
    <p class="lead"> I made this for you because you deserve all the sweetness.</p>

    <div class="message">
      <div class="typing" id="typing"></div>
    </div>

    <div class="controls">
      <a id="reply" class="button" role="button" tabindex="0">Reply</a>
      <a href="https://wa.link/fv1ual" target="_blank" class="button" rel="noopener noreferrer">WhatsApp Me 💬</a>
      <button id="music-toggle" class="button">Play Music 🎵</button>
      <audio id="bg-music" src="https://cdnsongs.com/music/data/Single_Track/201807/Leekan_Ashke/128/Leekan_Ashke_1.mp3" loop></audio>
    </div>

    <footer>Click "Change message" if you'd like different words — I can personalise it with names or dates.</footer>
  </div>

  <script>
     const messageLines = [
      "Hi Aisha,",
      "I know I messed up. The way I spoke to you was rude, and I truly didn’t mean to disrespect you.",
      "You mean the world to me, and I'll do better. I promise to listen, learn, and love you more every day.",
      "Can we have a warm hug and a fresh start? ❤️"
    ];

    const typingEl = document.getElementById('typing');
    const replyBtn = document.getElementById('reply');

    const musicToggle = document.getElementById('music-toggle');
    const bgMusic = document.getElementById('bg-music');

    let charDelay = 28;
    let lineDelay = 700;

    function sleep(ms){return new Promise(r => setTimeout(r, ms));}

    async function playTyping(lines){
      typingEl.textContent = '';
      for(let i=0;i<lines.length;i++){
        const line = lines[i];
        for(let j=0;j<line.length;j++){
          typingEl.textContent += line[j];
          await sleep(charDelay);
        }
        if(i < lines.length-1){
          typingEl.textContent += '\n\n';
          await sleep(lineDelay);
        }
      }
      const heart = document.querySelector('.cute-heart');
      heart.animate([{transform:'scale(1)'},{transform:'scale(1.36)'},{transform:'scale(1)'}],{duration:700,easing:'ease-out'});
      spawnHearts(12);
    }

    function spawnHearts(count){
      const stage = document.querySelector('.stage');
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'heart-float';
        const size = 18 + Math.round(Math.random()*22);
        el.style.width = el.style.height = size + 'px';
        el.style.left = Math.round(Math.random()*90) + '%';
        el.style.bottom = '-40px';
        el.style.opacity = Math.random()*0.9 + 0.2;
        el.style.transform = 'translateY(0) rotate(' + (Math.random()*40 - 20) + 'deg)';
        const dur = 3500 + Math.round(Math.random()*2600);
        el.style.animation = `floatUp ${dur}ms linear forwards`;
        el.style.animationDelay = Math.round(Math.random()*600) + 'ms';
        stage.appendChild(el);
        setTimeout(()=> el.remove(), dur + 1500);
      }
    }

    replyBtn.addEventListener('click', ()=>{
      playTyping(messageLines);
    });

    window.addEventListener('load', ()=>{
      playTyping(messageLines);
    });

    replyBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter' || e.key === ' ') replyBtn.click(); });

    musicToggle.addEventListener('click', () => {
      if (bgMusic.paused) {
        bgMusic.play();
        musicToggle.textContent = 'Pause Music 🔇';
      } else {
        bgMusic.pause();
        musicToggle.textContent = 'Play Music 🎵';
      }
    });
  </script>
</body>
</html>

